% ============================================
% Topic 09: Control Systems / æ§åˆ¶ç³»ç»Ÿ
% ============================================
\section{æ§åˆ¶ç³»ç»Ÿ / Control Systems}

% --------------------------------------------
% 1. Open-Loop vs Closed-Loop
% --------------------------------------------
\begin{studybox}{å¼€ç¯ä¸é—­ç¯æ§åˆ¶ (Open-Loop vs Closed-Loop)}

\textbf{æ¦‚å¿µ (CN)}: æ§åˆ¶ç³»ç»Ÿçš„ä¸¤ç§åŸºæœ¬ç»“æ„

\textbf{Term (EN)}: Open-Loop Control, Closed-Loop (Feedback) Control

\tcblower

\textbf{å¼€ç¯æ§åˆ¶ (Open-Loop)}:
\begin{itemize}[leftmargin=*]
    \item æ— åé¦ˆï¼Œè¾“å‡ºä¸å½±å“è¾“å…¥
    \item ç®€å•ä½†æ— æ³•è‡ªåŠ¨çº é”™
    \item ä¾‹ï¼šå®šæ—¶å™¨æ§åˆ¶çš„æ´—è¡£æœº
\end{itemize}

\textbf{é—­ç¯æ§åˆ¶ (Closed-Loop)}:
\begin{itemize}[leftmargin=*]
    \item æœ‰åé¦ˆï¼Œè¾“å‡ºé€šè¿‡ä¼ æ„Ÿå™¨åé¦ˆåˆ°è¾“å…¥
    \item å¯ä»¥è‡ªåŠ¨è°ƒèŠ‚è¯¯å·®
    \item ä¾‹ï¼šæ’æ¸©å™¨ã€å·¡èˆªæ§åˆ¶
\end{itemize}

\textbf{Key Insight}: Feedback is the key difference. Closed-loop systems are self-correcting but can become unstable.

\end{studybox}

\begin{formulabox}
\textbf{å¼€ç¯ä¼ é€’å‡½æ•°}:
\begin{equation}
    Y(s) = G(s) \cdot R(s)
\end{equation}

\textbf{é—­ç¯ä¼ é€’å‡½æ•°}:
\begin{equation}
    \frac{Y(s)}{R(s)} = \frac{G(s)}{1 + G(s)H(s)}
\end{equation}

å…¶ä¸­:
\begin{itemize}[leftmargin=*]
    \item $G(s)$ = å‰å‘é€šé“ä¼ é€’å‡½æ•°
    \item $H(s)$ = åé¦ˆé€šé“ä¼ é€’å‡½æ•°
    \item $R(s)$ = å‚è€ƒè¾“å…¥
    \item $Y(s)$ = è¾“å‡º
\end{itemize}
\end{formulabox}

% --------------------------------------------
% 2. PID Controller
% --------------------------------------------
\begin{studybox}{PID æ§åˆ¶å™¨ (PID Controller)}

\textbf{æ¦‚å¿µ (CN)}: æ¯”ä¾‹-ç§¯åˆ†-å¾®åˆ†æ§åˆ¶å™¨ï¼Œå·¥ä¸šæ§åˆ¶ä¸­æœ€å¸¸ç”¨çš„æ§åˆ¶å™¨

\textbf{Term (EN)}: Proportional-Integral-Derivative Controller

\tcblower

\textbf{ä¸‰ä¸ªç»„æˆéƒ¨åˆ†}:
\begin{itemize}[leftmargin=*]
    \item \textbf{P (æ¯”ä¾‹)}: å¯¹å½“å‰è¯¯å·®çš„å“åº”ã€‚$K_p$ è¶Šå¤§ï¼Œå“åº”è¶Šå¿«ï¼Œä½†å¯èƒ½æŒ¯è¡ã€‚
    \item \textbf{I (ç§¯åˆ†)}: å¯¹ç´¯ç§¯è¯¯å·®çš„å“åº”ã€‚æ¶ˆé™¤ç¨³æ€è¯¯å·®ï¼Œä½†å¢åŠ è¶…è°ƒã€‚
    \item \textbf{D (å¾®åˆ†)}: å¯¹è¯¯å·®å˜åŒ–ç‡çš„å“åº”ã€‚é¢„æµ‹è¯¯å·®è¶‹åŠ¿ï¼Œå‡å°‘è¶…è°ƒã€‚
\end{itemize}

\textbf{Key Insight}: P = "ç°åœ¨çš„è¯¯å·®", I = "è¿‡å»çš„è¯¯å·®", D = "æœªæ¥çš„è¯¯å·®"ã€‚

\end{studybox}

\begin{formulabox}
\textbf{æ—¶åŸŸè¡¨è¾¾å¼}:
\begin{equation}
    u(t) = K_p e(t) + K_i \int_0^t e(\tau) d\tau + K_d \frac{de(t)}{dt}
\end{equation}

\textbf{ä¼ é€’å‡½æ•°å½¢å¼}:
\begin{equation}
    C(s) = K_p + \frac{K_i}{s} + K_d s = K_p \left(1 + \frac{1}{T_i s} + T_d s\right)
\end{equation}

å…¶ä¸­:
\begin{itemize}[leftmargin=*]
    \item $e(t) = r(t) - y(t)$ = è¯¯å·®ä¿¡å·
    \item $K_p$ = æ¯”ä¾‹å¢ç›Š
    \item $K_i$ = ç§¯åˆ†å¢ç›Š
    \item $K_d$ = å¾®åˆ†å¢ç›Š
    \item $T_i = K_p / K_i$ = ç§¯åˆ†æ—¶é—´
    \item $T_d = K_d / K_p$ = å¾®åˆ†æ—¶é—´
\end{itemize}
\end{formulabox}

\begin{thmbox}[PID è°ƒå‚å£è¯€]
\textbf{Ziegler-Nichols ç»éªŒæ³•åˆ™}:
\begin{enumerate}
    \item è®¾ $K_i = 0$, $K_d = 0$
    \item å¢å¤§ $K_p$ ç›´åˆ°ç³»ç»Ÿä¸´ç•ŒæŒ¯è¡ï¼Œè®°å½•ä¸´ç•Œå¢ç›Š $K_u$ å’ŒæŒ¯è¡å‘¨æœŸ $T_u$
    \item æŒ‰ä¸‹è¡¨è®¾å®šå‚æ•°:
\end{enumerate}

\begin{center}
\begin{tabular}{lccc}
\toprule
\textbf{æ§åˆ¶å™¨} & $K_p$ & $K_i$ & $K_d$ \\
\midrule
P & $0.5 K_u$ & -- & -- \\
PI & $0.45 K_u$ & $1.2 K_p / T_u$ & -- \\
PID & $0.6 K_u$ & $2 K_p / T_u$ & $K_p T_u / 8$ \\
\bottomrule
\end{tabular}
\end{center}
\end{thmbox}

% --------------------------------------------
% 3. Stability Analysis
% --------------------------------------------
\begin{studybox}{ç¨³å®šæ€§åˆ†æ (Stability Analysis)}

\textbf{æ¦‚å¿µ (CN)}: åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦ç¨³å®šï¼ˆè¾“å‡ºæ˜¯å¦ä¼šå‘æ•£ï¼‰

\textbf{Term (EN)}: BIBO Stability, Poles, Routh-Hurwitz Criterion

\tcblower

\textbf{ç¨³å®šæ€§æ¡ä»¶}:
\begin{itemize}[leftmargin=*]
    \item \textbf{BIBO ç¨³å®š}: æœ‰ç•Œè¾“å…¥äº§ç”Ÿæœ‰ç•Œè¾“å‡º
    \item \textbf{æç‚¹ä½ç½®}: æ‰€æœ‰é—­ç¯æç‚¹å¿…é¡»åœ¨å·¦åŠå¹³é¢ (LHP)
    \item æç‚¹ $\text{Re}(p) < 0$ $\Rightarrow$ ç¨³å®š
\end{itemize}

\textbf{Key Insight}: A system is stable if all poles of the closed-loop transfer function have negative real parts.

\end{studybox}

\begin{formulabox}
\textbf{ç‰¹å¾æ–¹ç¨‹}:
\begin{equation}
    1 + G(s)H(s) = 0
\end{equation}

\textbf{Routh-Hurwitz åˆ¤æ®}:

å¯¹äºç‰¹å¾å¤šé¡¹å¼ $a_n s^n + a_{n-1} s^{n-1} + \cdots + a_1 s + a_0 = 0$:
\begin{itemize}[leftmargin=*]
    \item æ‰€æœ‰ç³»æ•° $a_i > 0$ï¼ˆå¿…è¦æ¡ä»¶ï¼‰
    \item Routh è¡¨ç¬¬ä¸€åˆ—æ‰€æœ‰å…ƒç´ åŒå· $\Rightarrow$ ç¨³å®š
\end{itemize}

\textbf{äºŒé˜¶ç³»ç»Ÿ}:
\begin{equation}
    G(s) = \frac{\omega_n^2}{s^2 + 2\zeta\omega_n s + \omega_n^2}
\end{equation}
ç¨³å®šæ¡ä»¶: $\zeta > 0$ï¼ˆé˜»å°¼æ¯”ä¸ºæ­£ï¼‰
\end{formulabox}

% --------------------------------------------
% 4. Frequency Response
% --------------------------------------------
\begin{studybox}{é¢‘ç‡å“åº” (Frequency Response)}

\textbf{æ¦‚å¿µ (CN)}: ç³»ç»Ÿå¯¹ä¸åŒé¢‘ç‡æ­£å¼¦è¾“å…¥çš„å“åº”ç‰¹æ€§

\textbf{Term (EN)}: Bode Plot, Gain Margin, Phase Margin

\tcblower

\textbf{Bode å›¾}:
\begin{itemize}[leftmargin=*]
    \item \textbf{å¹…é¢‘ç‰¹æ€§}: $20\log|G(j\omega)|$ vs $\log\omega$
    \item \textbf{ç›¸é¢‘ç‰¹æ€§}: $\angle G(j\omega)$ vs $\log\omega$
\end{itemize}

\textbf{ç¨³å®šè£•åº¦}:
\begin{itemize}[leftmargin=*]
    \item \textbf{å¢ç›Šè£•åº¦ (GM)}: ç›¸ä½ = $-180Â°$ æ—¶çš„å¢ç›Šè·ç¦» 0dB å¤šè¿œ
    \item \textbf{ç›¸ä½è£•åº¦ (PM)}: å¢ç›Š = 0dB æ—¶çš„ç›¸ä½è·ç¦» $-180Â°$ å¤šè¿œ
\end{itemize}

\textbf{Key Insight}: GM > 0dB and PM > 0Â° means stable. Larger margins = more robust.

\end{studybox}

\begin{formulabox}
\textbf{ä¸€é˜¶ç³»ç»Ÿ}:
\begin{equation}
    G(s) = \frac{K}{1 + \tau s}, \quad |G(j\omega)| = \frac{K}{\sqrt{1 + (\omega\tau)^2}}
\end{equation}

\textbf{æˆªæ­¢é¢‘ç‡} (Corner Frequency):
\begin{equation}
    \omega_c = \frac{1}{\tau}
\end{equation}

\textbf{æ¸è¿‘çº¿}:
\begin{itemize}[leftmargin=*]
    \item $\omega \ll \omega_c$: 0 dB/decade (å¹³å¦)
    \item $\omega \gg \omega_c$: -20 dB/decade (ä¸‹é™)
\end{itemize}
\end{formulabox}

% --------------------------------------------
% Thesis Connection
% --------------------------------------------
\begin{thesisbox}
\textbf{æ™ºèƒ½å®¶å±…ä¸æ§åˆ¶}:

ä½ çš„è®ºæ–‡ä¸­çš„ \textbf{Home Assistant} å®ç°äº†ç®€å•çš„åé¦ˆæ§åˆ¶ã€‚

\textbf{é—­ç¯æ§åˆ¶ç¤ºä¾‹}:
\begin{itemize}
    \item \textbf{ä¼ æ„Ÿå™¨}: SGP40 (VOC ä¼ æ„Ÿå™¨) æ£€æµ‹ç©ºæ°”è´¨é‡
    \item \textbf{æ§åˆ¶å™¨}: Home Assistant åˆ¤æ–­ VOC > é˜ˆå€¼
    \item \textbf{æ‰§è¡Œå™¨}: æ‰“å¼€æ¢æ°”æ‰‡
    \item \textbf{åé¦ˆ}: ç»§ç»­ç›‘æµ‹ VOC ç›´åˆ°ä¸‹é™
\end{itemize}

\textbf{Jan Koller é—®é¢˜}: "Is your smart home system open-loop or closed-loop?"

\textbf{ç­”æ¡ˆ}: é—­ç¯ã€‚ä¼ æ„Ÿå™¨æŒç»­åé¦ˆæ•°æ®ï¼Œç³»ç»Ÿæ ¹æ®å®æ—¶çŠ¶æ€è°ƒæ•´è¾“å‡ºï¼ˆå¦‚è‡ªåŠ¨å¼€ç¯ã€è°ƒæ¸©ï¼‰ã€‚
\end{thesisbox}

% --------------------------------------------
% Exam Strategy
% --------------------------------------------
\begin{warnbox}[ğŸ”´ è€ƒè¯•é™·é˜± / Exam Pitfalls]
\begin{enumerate}
    \item \textbf{æ··æ·†å¼€ç¯ä¸é—­ç¯ä¼ é€’å‡½æ•°}: é—­ç¯ = $\frac{G}{1+GH}$ï¼Œå¼€ç¯ = $GH$ã€‚
    \item \textbf{ç§¯åˆ†å™¨çš„ç¨³æ€è¯¯å·®}: ç§¯åˆ†é¡¹æ¶ˆé™¤ç¨³æ€è¯¯å·®ï¼Œä½†å¢åŠ è¶…è°ƒã€‚
    \item \textbf{æç‚¹ä½ç½®}: å³åŠå¹³é¢æç‚¹ = ä¸ç¨³å®šï¼
\end{enumerate}
\end{warnbox}
